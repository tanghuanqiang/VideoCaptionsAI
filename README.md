
# VideoCaptionsAI - 智能视频字幕处理系统

AI驱动的视频字幕识别、编辑、样式设计和硬字幕烧录一体化解决方案。

## 🎬 功能展示

### 1. 字幕编辑与样式设计
![字幕编辑界面](docs/images/subtitle-editing.png)
- **智能布局**：可拖拽的面板式布局，支持视频预览、字幕编辑、样式设计三个区域
- **实时编辑**：支持字幕文本的实时编辑，所见即所得
- **样式设计**：完整的ASS样式编辑面板，支持字体、颜色、描边、阴影等专业设置

### 2. 自动语音识别生成字幕
![语音识别界面](docs/images/asr-processing.png)
- **AI语音识别**：基于Whisper模型的高精度语音转文字
- **批量处理**：自动识别并生成时间轴精确的字幕条目
- **智能断句**：AI智能分段，确保字幕显示效果自然流畅

### 3. 硬字幕烧录导出
![视频导出进度](docs/images/video-export.png)
- **一键烧录**：将设计好的字幕永久烧录到视频中
- **实时进度**：显示详细的处理进度和预计完成时间
- **高质量输出**：保持原视频画质（**默认保存到用户的下载路径**）

### 4. AI Copilot 智能助手
![AI助手界面](docs/images/ai-copilot.png)
- **智能润色**：AI自动优化字幕内容，提升表达质量
- **批量处理**：支持对整个字幕项目进行智能优化
- **样式建议**：AI提供专业的字幕样式设计建议
- **交互式编辑**：通过自然语言与AI对话，完成复杂的编辑任务

---

## ✨ 核心特性

- **🎯 专业级字幕制作**：支持ASS格式的完整样式系统，包括字体、颜色、描边、阴影、对齐等
- **🤖 AI智能优化**：集成大语言模型，自动优化字幕内容和样式，提升表达质量
- **⚡ 实时预览**：所见即所得的字幕预览，确保最终效果与设计一致
- **🔄 流式处理**：支持SSE流式输出，提供流畅的实时编辑体验
- **📱 响应式布局**：可拖拽的面板布局，适应不同屏幕尺寸和工作习惯
- **🎬 一键导出**：高质量硬字幕烧录，支持多种视频格式输出

---

## 🏗 框架设计

本项目采用前后端分离架构，结合了本地 AI 能力和现代 Web 技术。

### 前端 (`agentfront/`)
- **核心框架**: React 18 + TypeScript + Vite
- **桌面封装**: Tauri (Rust) - 提供原生系统能力和跨平台支持
- **UI 组件**: Tailwind CSS + `react-grid-layout` (拖拽布局)
- **媒体处理**: `@ffmpeg/ffmpeg` (WASM) 用于前端轻量级处理
- **状态管理**: Context API + Local State

### 后端 (`VideoSubs/`)
- **API 服务**: FastAPI - 高性能 Python Web 框架
- **AI 编排**: LangGraph - 管理复杂的 AI 工作流和状态
- **语音识别**: OpenAI Whisper (本地运行)
- **媒体处理**: `ffmpeg-python` (调用系统 FFmpeg)
- **数据模型**: Pydantic - 严格的数据验证

---

## 🚀 快速开始

### 环境要求
- Python 3.12+
- Node.js 18+
- pnpm (推荐) 或 yarn
- Rust (仅开发 Tauri 桌面端需要)
- FFmpeg (必须添加到系统 PATH)

### 启动步骤

适合开发调试。

1. **克隆项目并配置环境**
   ```bash
   git clone https://github.com/tanghuanqiang/VideoCaptionsAI.git
   cd VideoCaptionsAI
   cp .env.example .env
   # 编辑 .env 填入 API Keys
   ```

2. **启动后端服务**
   ```bash
   cd VideoSubs
   
   # 创建并激活虚拟环境 (推荐)
   python -m venv venv
   # Windows:
   .\venv\Scripts\activate
   # Linux/Mac:
   source venv/bin/activate
   
   # 安装依赖
   pip install -e .
   
   # 启动服务
   uvicorn src.app:app --reload
   ```
   后端将在 `http://localhost:8000` 启动。

3. **启动前端应用**
   打开新的终端窗口：
   ```bash
   cd agentfront
   
   # 安装依赖
   pnpm install
   
   # 启动 Web 开发服务器
   pnpm dev
   ```
   前端将在 `http://localhost:5173` 启动。

4. **启动桌面版 (可选)**
   如果你安装了 Rust 环境：
   ```bash
   cd agentfront
   pnpm tauri dev
   ```

---

## 项目详情

### VideoSubs (后端)
专注于智能视频字幕处理的轻量级后端服务。
- **路径**: `VideoSubs/`
- **功能**: Whisper 离线语音识别、LangGraph AI 编排、FFmpeg 视频处理。

### AgentFront (前端)
基于 React 和 Tauri 的现代化字幕编辑界面。
- **路径**: `agentfront/`
- **功能**: 可视化字幕编辑、实时预览、样式调整、与后端 API 交互。

---

## 项目现状与发展规划

### 🚧 **当前不足与待实现功能**

#### VideoSubs (后端服务)
**已实现**：
- ✅ Whisper 语音识别基础功能
- ✅ FastAPI 服务框架
- ✅ LangGraph+LLM AI 优化架构
- ✅ SSE 流式输出

**待完善**：
- ⏳ **字幕时间轴精度优化** - 目前依赖 Whisper 原始时间戳，需要增加手动微调功能
- ⏳ **多语言翻译支持** - 计划集成翻译 API，支持字幕多语言生成
- ⏳ **批量处理队列** - 大文件处理时需要后台任务队列管理
- ⏳ **字幕格式扩展** - 目前主要支持 ASS，计划添加 SRT、VTT 等格式
- ⏳ **语音识别准确度提升** - 针对中文、方言、专业术语的识别优化
- ⏳ **字幕正确预览** - 未实现预览与输出完全一致，还需完善

#### AgentFront (桌面端)
**已实现**：
- ✅ React + Tauri 桌面应用框架
- ✅ 字幕编辑界面基础功能
- ✅ ASS 样式编辑面板
- ✅ 可拖拽布局系统

**待完善**：
- ⏳ **时间轴可视化编辑** - 类似专业视频编辑软件的时间轴界面
- ⏳ **音频波形显示** - 便于精确调整字幕时间点
- ⏳ **批量操作优化** - 字幕批量替换、格式化、时间偏移等
- ⏳ **预览功能增强** - 实时预览字幕在视频上的最终效果
- ⏳ **快捷键支持** - 提升编辑效率的键盘快捷键
- ⏳ **项目管理功能** - 字幕项目的保存、加载、版本管理
- ⏳ **性能优化** - 大文件处理时的内存和渲染优化

### 🎯 **短期目标 (1-2 个月)**
1. **完善核心编辑功能** - 时间轴编辑、批量操作
2. **提升用户体验** - 界面优化、性能提升、错误处理
3. **增加部署选项** - 安装包打包

### 🚀 **中期目标 (3-6 个月)**
1. **多语言翻译集成** - 支持字幕自动翻译功能
2. **AI 功能扩展** - 智能断句、说话人识别、情感分析
3. **协作功能** - 多人协作编辑、云端同步

### 🌟 **长期愿景 (6 个月以上)**
1. **专业级功能** - 音视频同步、字幕特效、高级样式
2. **平台扩展** - Web 版本、移动端适配
3. **生态建设** - 插件系统、第三方集成、开放 API

---

如需更多帮助或反馈，欢迎通过邮箱或 GitHub Issue 联系。



